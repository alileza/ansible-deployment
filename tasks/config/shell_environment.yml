---

- name: config | environment_variable | write environment variables file
  template: 
    src="{{ path_for_template }}shell_environment.sh.j2"
    dest="{{ deployment_config_shell_file }}"
    owner="{{ deployment_user }}"
    group="{{ deployment_user }}"
    mode="{{ deployment_config_file_perm }}"
  notify:
     - restart app

- name: config | environment_variable | Source environment variables file in your profile
  lineinfile: 
      line="{{item}}"
      insertbefore="BOF"
      state="present"
      create="yes"
      mode="0644"
      dest="{{ deployment_config_shell_profile }}"
  with_items: 
    - "source {{ deployment_config_shell_file }}"
  notify:
     - restart app